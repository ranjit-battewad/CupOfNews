function _55cfec970c1d858383aca0383c1bbd307cfc2c75(){};Ext.define("WTC.ux.Cover",{extend:"Ext.DataView",xtype:"cover",config:{selectedIndex:0,itemCls:"",preventSelectionOnItemTap:false,angle:70,flat:false,preventOrientationChange:false,baseCls:"ux-cover",itemBaseCls:"ux-cover-item-inner",scrollable:null,orientationCls:undefined},offset:0,initialize:function(){this.innerItemCls=this.getItemCls();if(this.innerItemCls){this.setItemCls(this.innerItemCls+"-wrap")}this.callParent();this.element.on({drag:"onDrag",dragstart:"onDragStart",dragend:"onDragEnd",scope:this});this.on({painted:"onPainted",itemtap:"doItemTap",scope:this});if(!this.getPreventOrientationChange()){Ext.Viewport.on("orientationchange",this.refresh,this)}this.setItemTransformation=(this.getFlat())?this.setItemTransformFlat:this.setItemTransform3d},getElementConfig:function(){return{reference:"element",children:[{reference:"innerElement",className:"ux-cover-scroller"}]}},applyFlat:function(a){return(Ext.os.is("Android")?true:a)},updateOrientationCls:function(a,b){var c=this.getBaseCls();if(this.element&&a!=b){this.element.removeCls(c+"-"+b);this.element.addCls(c+"-"+a)}},applyItemTpl:function(a){if(Ext.isArray(a)){a=a.join("")}return new Ext.XTemplate('<div class="'+this.getItemBaseCls()+" "+this.getItemCls()+' ">'+a+"</div>")},onPainted:function(){this.refresh()},getTargetEl:function(){return this.innerElement},onDragStart:function(){this.getTargetEl().dom.style.webkitTransitionDuration="0s"},onDrag:function(d){var c=this.getOffset(),f,b=this.getViewItems().length,a,g=(d.deltaX-d.previousDeltaX);a=this.getSelectedIndex();if((a===0&&d.deltaX>0)||(a===b-1&&d.deltaX<0)){g*=0.5}f=c+g;this.setOffset(f,true)},onDragEnd:function(){var b=this.getSelectedIndex(),a=-(b*this.gap);this.getTargetEl().dom.style.webkitTransitionDuration="0.4s";this.applySelectedIndex(b)},doItemTap:function(d,b,c,a){if(!this.getPreventSelectionOnItemTap()&&this.getSelectedIndex()!==b){this.setSelectedIndex(b)}},getSelectedIndex:function(){var a,b;if(this.isRendered()){b=this.getViewItems().length;a=-Math.round(this.getOffset()/this.gap);this.selectedIndex=Math.min(Math.max(a,0),b-1)}return this.selectedIndex},applySelectedIndex:function(a){if(this.isRendered()){this.updateOffsetToIdx(a);this.selectWithEvent(this.getStore().getAt(a))}else{this.selectedIndex=a}},updateOffsetToIdx:function(a){var b=this.getViewItems().length,c;a=Math.min(Math.max(a,0),b-1);c=-(a*this.gap);this.setOffset(c)},setOffset:function(e){var c=this.getViewItems(),a=0,b=c.length,d;this.offset=e;this.getTargetEl().dom.style.webkitTransform="translate3d("+e+"px, 0, 0)";for(;a<b;a++){d=Ext.get(c[a]);this.setItemTransformation(d,a,e)}},getOffset:function(){return this.offset},getBaseItemBox:function(e){var c=e.height,a=e.width,f=(a>c)?0.68:0.52,d,b;d=b=Math.min(e.width,e.height)*f;return{top:40,height:d*1.5,width:b,left:(e.width-b)/2}},setBoundaries:function(b){var a=b.width;if(this.getFlat()){this.gap=a*1.1;this.threshold=this.gap/3;this.delta=a*0.2}else{this.gap=a/3;this.threshold=this.gap/2;this.delta=a*0.4}},setItemTransformation:Ext.emptyFn,setItemTransform3d:function(d,b,e){var a=b*this.gap,c=a+e,f="";if(c<this.threshold&&c>=-this.threshold){f="translate3d("+a+"px, 0, 150px)";this.selectedIndex=b}else{if(c>0){f="translate3d("+(a+this.delta)+"px, 0, 0) rotateY(-"+this.getAngle()+"deg)"}else{f="translate3d("+(a-this.delta)+"px, 0, 0) rotateY("+this.getAngle()+"deg)"}}d.dom.style.webkitTransform=f},setItemTransformFlat:function(d,b,e){var a=b*this.gap,c=a+e,f="";if(c<this.threshold&&c>=-this.threshold){f="translate3d("+a+"px, 0, 150px)";this.selectedIndex=b}else{if(c>0){f="translate3d("+(a+this.delta)+"px, 0, 0)"}else{f="translate3d("+(a-this.delta)+"px, 0, 0)"}}d.dom.style.webkitTransform=f},doRefresh:function(f){var c=f.container,e,a=0,b,d=Ext.Viewport.getOrientation();this.setOrientationCls(d);this.callParent([f]);e=c.getViewItems();b=e.length;this.itemBox=this.getBaseItemBox(this.element.getBox());this.setBoundaries(this.itemBox);for(;a<b;a++){this.resizeItem(e[a])}this.setSelectedIndex(this.selectedIndex)},resizeItem:function(b){var a=this.itemBox,c=Ext.get(b);c.setBox(a);c.down("."+this.getItemBaseCls()).setBox({height:a.height/1.5,width:a.width})},onStoreUpdate:function(c,b,d,g){var f=this,a=f.container,e;g=(typeof g==="undefined")?d:g;if(g!==d){a.moveItemsToCache(g,g);a.moveItemsFromCache([b])}else{e=a.getViewItems()[d];a.updateListItem(b,e);f.resizeItem(e)}}});